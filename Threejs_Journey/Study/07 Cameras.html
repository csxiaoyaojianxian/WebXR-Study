<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link type="text/css" rel="stylesheet" href="./public.css" />
</head>

<body>

    <section class="text js-text">
        <h2>Introduction</h2>
<p>We already created a <code spellcheck="false">PerspectiveCamera</code>, but there are other types of cameras, as you can see in the documentation.</p>
<h4>Camera</h4>
<p>The <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/Camera">Camera</a> class is what we call an abstract class. You're not supposed to use it directly, but you can inherit from it to have access to common properties and methods. Some of the following classes inherit from the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/Camera">Camera</a> class.</p>
<h4>ArrayCamera</h4>
<p>The ArrayCamera is used to render your scene multiple times by using multiple cameras. Each camera will render a specific area of the canvas. You can imagine this looking like old school console multiplayer games where we had to share a split-screen.</p>
<h4>StereoCamera</h4>
<p>The <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/StereoCamera">StereoCamera</a> is used to render the scene through two cameras that mimic the eyes in order to create what we call a parallax effect that will lure your brain into thinking that there is depth. You must have the adequate equipment like a VR headset or red and blue glasses to see the result.</p>
<h4>CubeCamera</h4>
<p>The <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/CubeCamera">CubeCamera</a> is used to get a render facing each direction (forward, backward, leftward, rightward, upward, and downward) to create a render of the surrounding. You can use it to create an environment map for reflection or a shadow map. We'll talk about those later.</p>
<h4>OrthographicCamera</h4>
<p>The <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/OrthographicCamera">OrthographicCamera</a> is used to create orthographic renders of your scene without perspective. It's useful if you make an RTS game like Age of Empire. Elements will have the same size on the screen regardless of their distance from the camera.</p>
<h4>PerspectiveCamera</h4>
<p>The <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a> is the one we already used and simulated a real-life camera with perspective.</p>
<p>We are going to focus on the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/OrthographicCamera">OrthographicCamera</a> and the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a>.</p>
<h2>PerspectiveCamera</h2>
<p>As we saw earlier, the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a> class needs some parameters to be instantiated, but we didn't use all the possible parameters. Add the third and fourth parameters:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token keyword">const</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">75</span><span class="token punctuation">,</span> sizes<span class="token punctuation">.</span>width <span class="token operator">/</span> sizes<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p class="is-image"><span class="image-inner"><img data-src="./assets/lessons/07/step-01.png" src="./assets/lessons/07/step-01.png" width="1792" height="1120" alt="./assets/lessons/07/step-01.png" class="is-loaded"></span></p>
<p>You should get the same result but let's talk about those parameters in detail.</p>
<h4>Field of view</h4>
<p>The first parameter called <strong>field of view</strong> corresponds to your camera view's vertical amplitude angle in degrees. If you use a small angle, you'll end up with a long scope effect, and if you use a wide-angle, you'll end up with a fish eye effect because, in the end, what the camera sees will be stretched or squeezed to fit the canvas.</p>
<p>
            </p><div class="js-video video">
                <video class="js-element element" width="1792" height="1120" controls="" src="./assets/lessons/07/video-1.mp4"></video>
                <div class="js-overlay overlay"></div>
                <div class="logo">
                    <svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 58.5 66.6" style="enable-background:new 0 0 58.5 66.6;" xml:space="preserve">
                        <path class="face-1" d="M23.1,55.7l16.1-9.3c0,0,0,0,0,0c1.1-0.7,1.8-1.9,1.8-3.1l0.1-19.1L23.1,34.4V55.7z"></path>
                        <path class="face-2" d="M21.3,10L2.9,20.5l18,10.2l18.4-10.5c0,0,0,0-0.1,0l-17.4-10C21.7,10.1,21.5,10.1,21.3,10z"></path>
                        <path class="face-3" d="M1.8,46.7L18,56.6c0,0,0,0,0,0c0.3,0.2,0.5,0.3,0.8,0.3V34.5L0,23.8v19.7C0,44.9,0.7,46.1,1.8,46.7z"></path>
                        <path class="triangle-1" d="M56.8,30.4l-11.4-6.6l-0.1,19.2l11.5-6.7c1-0.6,1.7-1.7,1.7-2.9C58.5,32.1,57.9,31,56.8,30.4z"></path>
                        <path class="triangle-2" d="M0,50.7v12.6c0,1.2,0.6,2.3,1.7,2.9c0.5,0.3,1.1,0.5,1.7,0.5c0.6,0,1.2-0.2,1.7-0.5l10.4-6L0,50.7z"></path>
                        <path class="triangle-3" d="M16.4,7L5.1,0.5c-1-0.6-2.3-0.6-3.4,0C0.6,1.1,0,2.2,0,3.4v13.2L16.4,7z"></path>
                    </svg>
                </div>
            </div>
        <p></p>
<p>As for choosing the right field of view, you'll have to try things out. I usually use a field of view between <code spellcheck="false">45</code> and <code spellcheck="false">75</code>.</p>
<h4>Aspect ratio</h4>
<p>The second parameter is called <strong>aspect ratio</strong> and corresponds to the width divided by the height. While you might think that it's obviously the canvas width by the canvas height and Three.js should calculate it by itself, it's not always the case if you start using Three.js in very specific ways. But in our case, you can simply use the canvas width and the canvas height.</p>
<p>I recommend saving those values in an object because we are going to need them multiple times:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token keyword">const</span> sizes <span class="token operator">=</span> <span class="token punctuation">{</span>
width<span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
height<span class="token operator">:</span> <span class="token number">600</span>
<span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<h4>Near and far</h4>
<p>The third and fourth parameters called <strong>near</strong> and <strong>far</strong>, correspond to how close and how far the camera can see. Any object or part of the object closer to the camera than the <code spellcheck="false">near</code> value or further away from the camera than the <code spellcheck="false">far</code> value will not show up on the render.</p>
<p>You can see that like in those old racing games where you could see the trees pop up in the distance.</p>
<p>While you might be tempted to use very small and very large values like <code spellcheck="false">0.0001</code> and <code spellcheck="false">9999999</code> you might end up with a bug called z-fighting where two faces seem to fight for which one will be rendered above the other.</p>
<p><a target="_blank" href="https://twitter.com/FreyaHolmer/status/799602767081848832">https://twitter.com/FreyaHolmer/status/799602767081848832</a></p>
<p><a target="_blank" href="https://twitter.com/Snapman_I_Am/status/800567120765616128">https://twitter.com/Snapman_I_Am/status/800567120765616128</a></p>
<p>Try to use reasonable values and increase those only if you need it. In our case, we can use <code spellcheck="false">0.1</code> and <code spellcheck="false">100</code>.</p>
<h2>OrthographicCamera</h2>
<p>While we will not use this type of camera for the rest of the course, it can be useful for specific projects.</p>
<p>The <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/OrthographicCamera">OrthographicCamera</a> differs from the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a> by its lack of perspective, meaning that the objects will have the same size regardless of their distance from the camera.</p>
<p>The parameters you have to provide are very different from the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a>.</p>
<p>Instead of a field of view, you must provide how far the camera can see in each direction (<code spellcheck="false">left</code>, <code spellcheck="false">right</code>, <code spellcheck="false">top</code> and <code spellcheck="false">bottom</code>). Then you can provide the <code spellcheck="false">near</code> and <code spellcheck="false">far</code> values just like we did for the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a>.</p>
<p>Comment the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a> and add <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/OrthographicCamera">OrthographicCamera</a> . Keep the <code spellcheck="false">position</code> update and <code spellcheck="false">lookAt(...)</code> call:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token keyword">const</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrthographicCamera</span><span class="token punctuation">(</span><span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p class="is-image"><span class="image-inner"><img data-src="./assets/lessons/07/step-02.png" src="./assets/lessons/07/step-02.png" width="1792" height="1120" alt="./assets/lessons/07/step-02.png" class="is-loaded"></span></p>
<p>As you can see, there is no perspective, and the sides of our cube seem parallel. The problem is that our cube doesn't look cubic.</p>
<p>That is due to the values we provided for the <code spellcheck="false">left</code>, <code spellcheck="false">right</code>, <code spellcheck="false">top</code>, and <code spellcheck="false">bottom</code> which are <code spellcheck="false">1</code> or <code spellcheck="false">- 1</code>, meaning that we render a square area, but that square area will be stretched to fit our rectangle canvas and our canvas isn't a square.</p>
<p>We need to use the canvas ratio (width by height). Let's create a variable named <code spellcheck="false">aspectRatio</code> (just like the PerspectiveCamera) and store that ratio in it:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token keyword">const</span> aspectRatio <span class="token operator">=</span> sizes<span class="token punctuation">.</span>width <span class="token operator">/</span> sizes<span class="token punctuation">.</span>height
<span class="token keyword">const</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrthographicCamera</span><span class="token punctuation">(</span><span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">*</span> aspectRatio<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">*</span> aspectRatio<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p class="is-image"><span class="image-inner"><img data-src="./assets/lessons/07/step-03.png" src="./assets/lessons/07/step-03.png" width="1792" height="1120" alt="./assets/lessons/07/step-03.png" class="is-loaded"></span></p>
<p>This results in a render area width larger than the render area height because our canvas width is larger than its height. </p>
<p>We now have a cube that looks like a cube.</p>
<h2>Custom controls</h2>
<p>Let's get back to our <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a>. Comment the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/OrthographicCamera">OrthographicCamera</a>, uncomment the <a target="_blank" href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a>, move the <code spellcheck="false">camera</code> so it faces the cube, and remove the mesh rotation in the <code spellcheck="false">tick</code> function:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token comment">// Camera</span>
<span class="token keyword">const</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">75</span><span class="token punctuation">,</span> sizes<span class="token punctuation">.</span>width <span class="token operator">/</span> sizes<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token comment">// const aspectRatio = sizes.width / sizes.height</span>
<span class="token comment">// const camera = new THREE.OrthographicCamera(- 1 * aspectRatio, 1 * aspectRatio, 1, - 1, 0.1, 100)</span>

<span class="token comment">// camera.position.x = 2</span>
<span class="token comment">// camera.position.y = 2</span>
camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">3</span>
camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>camera<span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>What we want to do now is control the camera with our mouse. First of all, we want to know the mouse coordinates. We can do that using native JavaScript by listening to the <code spellcheck="false">mousemove</code> event with  <code spellcheck="false">addEventListener</code>.</p>
<p>The coordinates will be located in the argument of the callback function as <code spellcheck="false">event.clientX</code> and <code spellcheck="false">event.clientY</code>:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token comment">// Cursor</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>We could use those values, but I recommend adjusting them. By adjusting, I mean to have a <code spellcheck="false">1</code> amplitude and that the value can be both negative and positive.</p>
<p>If we only focus on the <code spellcheck="false">x</code> value, that would mean that:</p>
<ul>
<li>if your cursor is on the far left of the canvas, you should get <code spellcheck="false">- 0.5</code></li>
<li>if your cursor is at the center of the canvas, you should get <code spellcheck="false">0</code></li>
<li>if your cursor is at the far right of the canvas, you should get <code spellcheck="false">0.5</code></li>
</ul>
<p>While this is not mandatory, it helps to have clean values like that.</p>
<p>Just like the <code spellcheck="false">size</code> variable, we will create a <code spellcheck="false">cursor</code> variable with default <code spellcheck="false">x</code> and <code spellcheck="false">y</code> properties and then update those properties in the <code spellcheck="false">mousemove</code> callback:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token comment">// Cursor</span>
<span class="token keyword">const</span> cursor <span class="token operator">=</span> <span class="token punctuation">{</span>
x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
y<span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
cursor<span class="token punctuation">.</span>x <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">/</span> sizes<span class="token punctuation">.</span>width <span class="token operator">-</span> <span class="token number">0.5</span>
cursor<span class="token punctuation">.</span>y <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">/</span> sizes<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">0.5</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span>x<span class="token punctuation">,</span> cursor<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Dividing <code spellcheck="false">event.clientX</code> by <code spellcheck="false">sizes.width</code> will give us a value between  <code spellcheck="false">0</code> and <code spellcheck="false">1</code> (if we keep the cursor above the canvas) while subtracting <code spellcheck="false">0.5</code> will give you a value between <code spellcheck="false">- 0.5</code> and <code spellcheck="false">0.5</code>.</p>
<p>You now have the mouse position stored in the <code spellcheck="false">cursor</code> object variable, and you can update the position of the camera in the <code spellcheck="false">tick</code> function:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">tick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
<span class="token comment">// ...</span>

<span class="token comment">// Update camera</span>
camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> cursor<span class="token punctuation">.</span>x
camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> cursor<span class="token punctuation">.</span>y

<span class="token comment">// ...</span>
<span class="token punctuation">}</span> </code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>
            </p><div class="js-video video">
                <video class="js-element element" width="1792" height="1120" controls="" src="./assets/lessons/07/step-04.mp4"></video>
                <div class="js-overlay overlay"></div>
                <div class="logo">
                    <svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 58.5 66.6" style="enable-background:new 0 0 58.5 66.6;" xml:space="preserve">
                        <path class="face-1" d="M23.1,55.7l16.1-9.3c0,0,0,0,0,0c1.1-0.7,1.8-1.9,1.8-3.1l0.1-19.1L23.1,34.4V55.7z"></path>
                        <path class="face-2" d="M21.3,10L2.9,20.5l18,10.2l18.4-10.5c0,0,0,0-0.1,0l-17.4-10C21.7,10.1,21.5,10.1,21.3,10z"></path>
                        <path class="face-3" d="M1.8,46.7L18,56.6c0,0,0,0,0,0c0.3,0.2,0.5,0.3,0.8,0.3V34.5L0,23.8v19.7C0,44.9,0.7,46.1,1.8,46.7z"></path>
                        <path class="triangle-1" d="M56.8,30.4l-11.4-6.6l-0.1,19.2l11.5-6.7c1-0.6,1.7-1.7,1.7-2.9C58.5,32.1,57.9,31,56.8,30.4z"></path>
                        <path class="triangle-2" d="M0,50.7v12.6c0,1.2,0.6,2.3,1.7,2.9c0.5,0.3,1.1,0.5,1.7,0.5c0.6,0,1.2-0.2,1.7-0.5l10.4-6L0,50.7z"></path>
                        <path class="triangle-3" d="M16.4,7L5.1,0.5c-1-0.6-2.3-0.6-3.4,0C0.6,1.1,0,2.2,0,3.4v13.2L16.4,7z"></path>
                    </svg>
                </div>
            </div>
        <p></p>
<p>As you can see, it's working but the axes movements seem kind of wrong. This is due to the <code spellcheck="false">position.y</code> axis being positive when going upward in Three.js but the <code spellcheck="false">clientY</code> axis being positive when going downward in the webpage.</p>
<p>You can simply invert the <code spellcheck="false">cursor.y</code> while updating it by adding a <code spellcheck="false">-</code> in front of the whole formula (don't forget the parentheses):</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
cursor<span class="token punctuation">.</span>x <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">/</span> sizes<span class="token punctuation">.</span>width <span class="token operator">-</span> <span class="token number">0.5</span>
cursor<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientY <span class="token operator">/</span> sizes<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>
            </p><div class="js-video video">
                <video class="js-element element" width="1792" height="1120" controls="" src="./assets/lessons/07/step-05.mp4"></video>
                <div class="js-overlay overlay"></div>
                <div class="logo">
                    <svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 58.5 66.6" style="enable-background:new 0 0 58.5 66.6;" xml:space="preserve">
                        <path class="face-1" d="M23.1,55.7l16.1-9.3c0,0,0,0,0,0c1.1-0.7,1.8-1.9,1.8-3.1l0.1-19.1L23.1,34.4V55.7z"></path>
                        <path class="face-2" d="M21.3,10L2.9,20.5l18,10.2l18.4-10.5c0,0,0,0-0.1,0l-17.4-10C21.7,10.1,21.5,10.1,21.3,10z"></path>
                        <path class="face-3" d="M1.8,46.7L18,56.6c0,0,0,0,0,0c0.3,0.2,0.5,0.3,0.8,0.3V34.5L0,23.8v19.7C0,44.9,0.7,46.1,1.8,46.7z"></path>
                        <path class="triangle-1" d="M56.8,30.4l-11.4-6.6l-0.1,19.2l11.5-6.7c1-0.6,1.7-1.7,1.7-2.9C58.5,32.1,57.9,31,56.8,30.4z"></path>
                        <path class="triangle-2" d="M0,50.7v12.6c0,1.2,0.6,2.3,1.7,2.9c0.5,0.3,1.1,0.5,1.7,0.5c0.6,0,1.2-0.2,1.7-0.5l10.4-6L0,50.7z"></path>
                        <path class="triangle-3" d="M16.4,7L5.1,0.5c-1-0.6-2.3-0.6-3.4,0C0.6,1.1,0,2.2,0,3.4v13.2L16.4,7z"></path>
                    </svg>
                </div>
            </div>
        <p></p>
<p>Finally, you can increase the amplitude by multiplying the <code spellcheck="false">cursor.x</code> and <code spellcheck="false">cursor.y</code> and ask the camera to look at the mesh using the <code spellcheck="false">lookAt(...)</code> method:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">tick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
<span class="token comment">// ...</span>

<span class="token comment">// Update camera</span>
camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> cursor<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">5</span>
camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> cursor<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">5</span>
camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">)</span>

<span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>
            </p><div class="js-video video">
                <video class="js-element element" width="1792" height="1120" controls="" src="./assets/lessons/07/step-06.mp4"></video>
                <div class="js-overlay overlay"></div>
                <div class="logo">
                    <svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 58.5 66.6" style="enable-background:new 0 0 58.5 66.6;" xml:space="preserve">
                        <path class="face-1" d="M23.1,55.7l16.1-9.3c0,0,0,0,0,0c1.1-0.7,1.8-1.9,1.8-3.1l0.1-19.1L23.1,34.4V55.7z"></path>
                        <path class="face-2" d="M21.3,10L2.9,20.5l18,10.2l18.4-10.5c0,0,0,0-0.1,0l-17.4-10C21.7,10.1,21.5,10.1,21.3,10z"></path>
                        <path class="face-3" d="M1.8,46.7L18,56.6c0,0,0,0,0,0c0.3,0.2,0.5,0.3,0.8,0.3V34.5L0,23.8v19.7C0,44.9,0.7,46.1,1.8,46.7z"></path>
                        <path class="triangle-1" d="M56.8,30.4l-11.4-6.6l-0.1,19.2l11.5-6.7c1-0.6,1.7-1.7,1.7-2.9C58.5,32.1,57.9,31,56.8,30.4z"></path>
                        <path class="triangle-2" d="M0,50.7v12.6c0,1.2,0.6,2.3,1.7,2.9c0.5,0.3,1.1,0.5,1.7,0.5c0.6,0,1.2-0.2,1.7-0.5l10.4-6L0,50.7z"></path>
                        <path class="triangle-3" d="M16.4,7L5.1,0.5c-1-0.6-2.3-0.6-3.4,0C0.6,1.1,0,2.2,0,3.4v13.2L16.4,7z"></path>
                    </svg>
                </div>
            </div>
        <p></p>
<p>We can go even further by doing a full rotation of the camera around the mesh by using <code spellcheck="false">Math.sin(...)</code> and <code spellcheck="false">Math.cos(...)</code>.</p>
<p><code spellcheck="false">sin</code> and <code spellcheck="false">cos</code>, when combined and used with the same angle, enable us to place things on a circle. To do a full rotation, that angle must have an amplitude of 2 times π (called "pi"). Just so you know, a full rotation is called a "tau" but we don't have access to this value in JavaScript and we have to use π instead.</p>
<p>You can access an approximation of π in native JavaScript using <code spellcheck="false">Math.PI</code>.</p>
<p>To increase the radius of that circle, you can simply multiply the result of <code spellcheck="false">Math.sin(...)</code> and <code spellcheck="false">Math.cos(...)</code>:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">tick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
<span class="token comment">// ...</span>

<span class="token comment">// Update camera</span>
camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span>x <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span>
camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span>x <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span>
camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> cursor<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">3</span>
camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">)</span>

<span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>
            </p><div class="js-video video">
                <video class="js-element element" width="1792" height="1120" controls="" src="./assets/lessons/07/step-07.mp4"></video>
                <div class="js-overlay overlay"></div>
                <div class="logo">
                    <svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 58.5 66.6" style="enable-background:new 0 0 58.5 66.6;" xml:space="preserve">
                        <path class="face-1" d="M23.1,55.7l16.1-9.3c0,0,0,0,0,0c1.1-0.7,1.8-1.9,1.8-3.1l0.1-19.1L23.1,34.4V55.7z"></path>
                        <path class="face-2" d="M21.3,10L2.9,20.5l18,10.2l18.4-10.5c0,0,0,0-0.1,0l-17.4-10C21.7,10.1,21.5,10.1,21.3,10z"></path>
                        <path class="face-3" d="M1.8,46.7L18,56.6c0,0,0,0,0,0c0.3,0.2,0.5,0.3,0.8,0.3V34.5L0,23.8v19.7C0,44.9,0.7,46.1,1.8,46.7z"></path>
                        <path class="triangle-1" d="M56.8,30.4l-11.4-6.6l-0.1,19.2l11.5-6.7c1-0.6,1.7-1.7,1.7-2.9C58.5,32.1,57.9,31,56.8,30.4z"></path>
                        <path class="triangle-2" d="M0,50.7v12.6c0,1.2,0.6,2.3,1.7,2.9c0.5,0.3,1.1,0.5,1.7,0.5c0.6,0,1.2-0.2,1.7-0.5l10.4-6L0,50.7z"></path>
                        <path class="triangle-3" d="M16.4,7L5.1,0.5c-1-0.6-2.3-0.6-3.4,0C0.6,1.1,0,2.2,0,3.4v13.2L16.4,7z"></path>
                    </svg>
                </div>
            </div>
        <p></p>
<p>While this is a good start to control the camera, Three.js has integrated multiple classes called controls to help you do the same and much more.</p>
<h2>Built-in controls</h2>
<p>If you type "controls" in the <a target="_blank" href="https://threejs.org/docs/index.html#api/en/math/Euler">Three.js documentation</a>, you'll see that there are a lot of pre-made controls. We will only use one of them for the rest of the course, but it can be interesting to know their role.</p>
<h4>DeviceOrientationControls</h4>
<p><a target="_blank" href="https://threejs.org/docs/#examples/en/controls/DeviceOrientationControls">DeviceOrientationControls</a> will automatically retrieve the device orientation if your device, OS, and browser allow it and rotate the camera accordingly. You can use it to create immersive universes or VR experiences if you have the right equipment.</p>
<h4>FlyControls</h4>
<p><a target="_blank" href="https://threejs.org/docs/#examples/en/controls/FlyControls">FlyControls</a> enable moving the camera like if you were on a spaceship. You can rotate on all 3 axes, go forward and go backward.</p>
<h4>FirstPersonControls</h4>
<p><a target="_blank" href="https://threejs.org/docs/#examples/en/controls/FirstPersonControls">FirstPersonControls</a> is just like <a target="_blank" href="https://threejs.org/docs/#examples/en/controls/FlyControls">FlyControls</a>, but with a fixed up axis. You can see that like a flying bird view where the bird cannot do a barrel roll.
While the FirstPersonControls contains "FirstPerson," it doesn't work like in FPS games.</p>
<h4>PointerLockControls</h4>
<p><a target="_blank" href="https://threejs.org/docs/#examples/en/controls/PointerLockControls">PointerLockControls</a> uses the <a target="_blank" href="https://developer.mozilla.org/docs/Web/API/Pointer_Lock_API">pointer lock JavaScript API</a>. This API hides the cursor, keeps it centered, and keeps sending the movements in the <code spellcheck="false">mousemove</code> event callback. With this API, you can create FPS games right inside the browser.
While this class sounds very promising if you want to create that kind of interaction, it'll only handle the camera rotation when the pointer is locked. You'll have to handle the camera position and game physics by yourself.</p>
<h4>OrbitControls</h4>
<p><a target="_blank" href="https://threejs.org/docs/#examples/en/controls/OrbitControls">OrbitControls</a> is very similar to the controls we made in the previous lesson. You can rotate around a point with the left mouse, translate laterally using the right mouse, and zoom in or out using the wheel.</p>
<h4>TrackballControls</h4>
<p><a target="_blank" href="https://threejs.org/docs/#examples/en/controls/TrackballControls">TrackballControls</a> is just like <a target="_blank" href="https://threejs.org/docs/#examples/en/controls/OrbitControls">OrbitControls</a> but there are no limits in terms of vertical angle. You can keep rotating and do spins with the camera even if the scene gets upside down.</p>
<h4>TransformControls</h4>
<p><a target="_blank" href="https://threejs.org/docs/#examples/en/controls/TransformControls">TransformControls</a> has nothing to do with the camera. You can use it to add a gizmo to an object to move that object.</p>
<h4>DragControls</h4>
<p>Just like the <a target="_blank" href="https://threejs.org/docs/#examples/en/controls/TransformControls">TransformControls</a>, <a target="_blank" href="https://threejs.org/docs/#examples/en/controls/DragControls">DragControls</a> has nothing to do with the camera. You can use it to move objects on a plane facing the camera by drag and dropping them.</p>
<p>We will only use the <a target="_blank" href="https://threejs.org/docs/#examples/en/controls/OrbitControls">OrbitControls</a> but feel free to test the other classes.</p>
<h2>OrbitControls</h2>
<p>Let's comment the part where we update the <code spellcheck="false">camera</code> in the <code spellcheck="false">tick</code> function.</p>
<h3>Instantiating</h3>
<p>First, we need to instantiate a variable using the <a target="_blank" href="https://threejs.org/docs/#examples/en/controls/OrbitControls">OrbitControls</a> class. While you might think you can use <code spellcheck="false">THREE.OrbitControls</code> here, you are unfortunately mistaken.</p>
<p>The OrbitControls class is part of those classes that are not available by default in the <code spellcheck="false">THREE</code> variable. That decision helps to reduce the weight of the library. And this is where our Webpack template comes in.</p>
<p>The <code spellcheck="false">OrbitControls</code> class may not be available in the <code spellcheck="false">THREE</code> variable; it is still located in the dependencies folder. To import it, you must provide the path from inside the <code spellcheck="false">/node_modules/</code> folder, which is <code spellcheck="false">/three/examples/jsm/controls/OrbitControls.js</code>:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> OrbitControls <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'three/examples/jsm/controls/OrbitControls.js'</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>You can now instantiate a variable using the class <code spellcheck="false">OrbitControls</code> (without the <code spellcheck="false">THREE.</code>) and make sure to do that after creating the camera.</p>
<p>For it to work, you must provide the camera and the element in the page that will handle the mouse events as parameters:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token comment">// Controls</span>
<span class="token keyword">const</span> controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrbitControls</span><span class="token punctuation">(</span>camera<span class="token punctuation">,</span> canvas<span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>
            </p><div class="js-video video">
                <video class="js-element element" width="1792" height="1120" controls="" src="./assets/lessons/07/step-08.mp4"></video>
                <div class="js-overlay overlay"></div>
                <div class="logo">
                    <svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 58.5 66.6" style="enable-background:new 0 0 58.5 66.6;" xml:space="preserve">
                        <path class="face-1" d="M23.1,55.7l16.1-9.3c0,0,0,0,0,0c1.1-0.7,1.8-1.9,1.8-3.1l0.1-19.1L23.1,34.4V55.7z"></path>
                        <path class="face-2" d="M21.3,10L2.9,20.5l18,10.2l18.4-10.5c0,0,0,0-0.1,0l-17.4-10C21.7,10.1,21.5,10.1,21.3,10z"></path>
                        <path class="face-3" d="M1.8,46.7L18,56.6c0,0,0,0,0,0c0.3,0.2,0.5,0.3,0.8,0.3V34.5L0,23.8v19.7C0,44.9,0.7,46.1,1.8,46.7z"></path>
                        <path class="triangle-1" d="M56.8,30.4l-11.4-6.6l-0.1,19.2l11.5-6.7c1-0.6,1.7-1.7,1.7-2.9C58.5,32.1,57.9,31,56.8,30.4z"></path>
                        <path class="triangle-2" d="M0,50.7v12.6c0,1.2,0.6,2.3,1.7,2.9c0.5,0.3,1.1,0.5,1.7,0.5c0.6,0,1.2-0.2,1.7-0.5l10.4-6L0,50.7z"></path>
                        <path class="triangle-3" d="M16.4,7L5.1,0.5c-1-0.6-2.3-0.6-3.4,0C0.6,1.1,0,2.2,0,3.4v13.2L16.4,7z"></path>
                    </svg>
                </div>
            </div>
        <p></p>
<p>You can now drag and drop using both the left mouse or the right mouse to move the camera, and you can scroll up or down to zoom in or out.</p>
<p>It's much easier than our custom code, and it comes with more controls. But let's go a little further.</p>
<h3>Target</h3>
<p>By default, the camera is looking at the center of the scene. We can change that with the <code spellcheck="false">target</code> property.</p>
<p>This property is a <a target="_blank" href="https://threejs.org/docs/#api/en/math/Vector3">Vector3</a>, meaning that we can change its <code spellcheck="false">x</code>, <code spellcheck="false">y</code> and <code spellcheck="false">z</code> properties.</p>
<p>If we want the <a target="_blank" href="https://threejs.org/docs/#examples/en/controls/OrbitControls">OrbitControls</a> to look above the cube by default, we just have to increase the <code spellcheck="false">y</code> property:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript">controls<span class="token punctuation">.</span>target<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>This is not very useful in our case so let's comment this part.</p>
<h3>Damping</h3>
<p>If you read the documentation of <a target="_blank" href="https://threejs.org/docs/#examples/en/controls/OrbitControls">OrbitControls</a> there are mentions of <code spellcheck="false">damping</code>. The damping will smooth the animation by adding some kind of acceleration and friction formulas.</p>
<p>To enable damping, switch the <code spellcheck="false">enableDamping</code> property of <code spellcheck="false">controls</code> to <code spellcheck="false">true</code>.</p>
<p>In order to work properly, the controls also needs to be updated on each frame by calling <code spellcheck="false">controls.update()</code>. You can do that on the <code spellcheck="false">tick</code> function:</p>
<div class="code-toolbar"><pre contenteditable="" class=" language-javascript"><code spellcheck="false" class=" language-javascript"><span class="token comment">// Controls</span>
<span class="token keyword">const</span> controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrbitControls</span><span class="token punctuation">(</span>camera<span class="token punctuation">,</span> canvas<span class="token punctuation">)</span>
controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token comment">// ...</span>

<span class="token keyword">const</span> <span class="token function-variable function">tick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
<span class="token comment">// ...</span>

<span class="token comment">// Update controls</span>
controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span>JavaScript</span></div><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>
            </p><div class="js-video video">
                <video class="js-element element" width="1792" height="1120" controls="" src="./assets/lessons/07/step-09.mp4"></video>
                <div class="js-overlay overlay"></div>
                <div class="logo">
                    <svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 58.5 66.6" style="enable-background:new 0 0 58.5 66.6;" xml:space="preserve">
                        <path class="face-1" d="M23.1,55.7l16.1-9.3c0,0,0,0,0,0c1.1-0.7,1.8-1.9,1.8-3.1l0.1-19.1L23.1,34.4V55.7z"></path>
                        <path class="face-2" d="M21.3,10L2.9,20.5l18,10.2l18.4-10.5c0,0,0,0-0.1,0l-17.4-10C21.7,10.1,21.5,10.1,21.3,10z"></path>
                        <path class="face-3" d="M1.8,46.7L18,56.6c0,0,0,0,0,0c0.3,0.2,0.5,0.3,0.8,0.3V34.5L0,23.8v19.7C0,44.9,0.7,46.1,1.8,46.7z"></path>
                        <path class="triangle-1" d="M56.8,30.4l-11.4-6.6l-0.1,19.2l11.5-6.7c1-0.6,1.7-1.7,1.7-2.9C58.5,32.1,57.9,31,56.8,30.4z"></path>
                        <path class="triangle-2" d="M0,50.7v12.6c0,1.2,0.6,2.3,1.7,2.9c0.5,0.3,1.1,0.5,1.7,0.5c0.6,0,1.2-0.2,1.7-0.5l10.4-6L0,50.7z"></path>
                        <path class="triangle-3" d="M16.4,7L5.1,0.5c-1-0.6-2.3-0.6-3.4,0C0.6,1.1,0,2.2,0,3.4v13.2L16.4,7z"></path>
                    </svg>
                </div>
            </div>
        <p></p>
<p>You'll see that the controls are now a lot smoother.</p>
<p>You can use many other methods and properties to customize your controls such as the rotation speed, zoom speed, zoom limit, angle limit, damping strength, and key bindings (because yes, you can also use your keyboard).</p>
<h2>When to use built-in controls</h2>
<p>While those controls are handy, they have limitations. If you rely too much on them, you might end up having to change how the class is working in an unexpected way.</p>
<p>First, make sure to list all the features you need from those controls, then check if the class you're about to use can handle all of those features.</p>
<p>If not, you'll have to do it on your own.</p>
    </section>
</body>

</html>